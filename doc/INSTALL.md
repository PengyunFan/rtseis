# Installation Instructions

Below are instructions for building RTSeis from source on Linux.

## Dependencies

Prior to building RTSeis the following dependencies must be cleared:

   1. A C11 or higher C compiler.
   2. A C++14 or higher C++ compiler.
   3. [CMake](https://cmake.org/) V3.2 or higher.
   4. [Intel's Performance Primitives](https://software.intel.com/en-us/intel-ipp) performs most of the heavy lifting.
   5. [Intel's MKL](https://software.intel.com/en-us/mkl) backfills some of the matrix algebra and any massive correlations.
   6. [pybind11](https://pybind11.readthedocs.io/en/stable/) generates the Python bindings that call the RTSeis C++ library.  This is only required if the Python bindings are desired.
   7. Python3 with NumPy.  This is only required if the Python bindings are desired.

## Configuring

CMake can be configured using a script like

    #!/bin/sh
    # Set the compilers
    export CC=/usr/bin/clang-6.0
    export CXX=/usr/bin/clang++-6.0
    # Set the libraries
    export IPP_DIR=/opt/intel/ipp
    export IPP_LIB_ROOT=${IPP_DIR}/lib/intel64
    export MKL_DIR=/opt/intel/mkl
    export MKL_LIB_ROOT=${MKL_DIR}/lib/intel64
    # Only matters if you intend to 
    export pybind11_INCLUDE_DIR=/usr/local/include/pybind11
    # Set the working directory
    export BUILD_DIR=clang_build 
    # Clobber the existing directory for a fresh build
    if [ -d ${BUILD_DIR} ]; then
       rm -r {BUILD_DIR}
    fi
    mkdir ${BUILD_DIR}
    # Descend into build directory 
    cd ${BUILD_DIR}
    # Configure a build release - to disable Python wrapping remove -DRTSEIS_WRAP_PYTHON
    cmake ../ \
    -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_C_COMPILER=${CC} \
    -DCMAKE_CXX_COMPILER=${CXX} \
    -DCMAKE_C_FLAGS="-Wall" \
    -DCMAKE_CXX_FLAGS="-Wall" \
    -DIPP_INCLUDE_DIR=${IPP_DIR}/include \
    -DIPP_LIBRARY="${IPP_LIB_ROOT}/libipps.so;${IPP_LIB_ROOT}/libippvm.so;${IPP_LIB_ROOT}/libippcore.so" \
    -DMKL_INCLUDE_DIR="${MKL_DIR}/include" \
    -DMKL_LIBRARY="${MKL_LIB_ROOT}/libmkl_intel_lp64.so;${MKL_LIB_ROOT}/libmkl_sequential.so;${MKL_LIB_ROOT}/libmkl_core.so;${MKL_LIB_ROOT}/libmkl_avx2.so" \
    -DRTSEIS_WRAP_PYTHON=TRUE \
    -Dpybind11_INCLUDE_DIR="/usr/local/include/pybind11"

## Building

After successfully configuring CMake the software can be built by then typing

    make

in the command line.

## Testing

Following a successful compilation the software should be tested by typing

    make test

in the command line.

## Installing

make install isn't implemented yetin the cmake

## Generating the Doxygen

The API documentation can be generated by typing

    doxygen Doxyfile

